#!/bin/bash
folder1="Output/LEFSE/step1V2_score"
folder2="Output/LEFSE/step2V2_score"
DIRECTORY="Output/LEFSE/step0V2_score"

mkdir -p "$folder1"
mkdir -p "$folder2"

for FILE in "$DIRECTORY"/*; do
    if [ -f "$FILE" ]; then
        echo "Processing file: $FILE"

        BASENAME=$(basename "$FILE")

        lefse-format_input.py "$FILE" "$folder1/${BASENAME}.in" -c 1 -s -1 -u 2 -o 1000000
        run_lefse.py -w 1 -l 2 "$folder1/${BASENAME}.in" "$folder2/${BASENAME}.res"

        echo "Elaboration complete for $FILE"
    fi
done


